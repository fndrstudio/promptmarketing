---
// Sticky Basic Features
// ------------
// Description: A sticky basic features section.
// Properties:
// - classes: Additional classes to be added to the sticky basic features section

// Components
// - Layout
import SectionSticky from '../../blocks/basic/StickySidebarTransparent.astro'
import Row from '../../ui/Row.astro'
import Col from '../../ui/Col.astro'
// - UI
import Header from '../../ui/Header.astro'
import FeatureBasicCard from '../../ui/cards/FeatureBasicCard.astro'

// Content
// - Data
import featuresData from '../../../data/json-files/featuresData.json'
// Create pairs of features (2 per row)
const featureData = featuresData.map((section) => {
	const pairs = []
	for (let i = 0; i < section.features.length; i += 2) {
		pairs.push(section.features.slice(i, i + 2))
	}
	return { ...section, featurePairs: pairs }
})

// - Props
type Props = {
	classes?: string
}
const { classes = '' } = Astro.props
---

{
	// Loop through each section
	featureData.map((section: any) => (
		<SectionSticky classes={classes}>
			{/* Section title and subtitle */}
			<Header
				title={section.title}
				subtitle={section.subtitle}
				headingLevel="h2"
				titleClasses="bg-white dark:bg-neutral-950 text-5xl!"
				slot="sidebar"
			/>

			{/* Loop through each pair of features */}
			{section.featurePairs.map((pair: any, index: number) => (
				<Row
					decorationBorder="top bottom"
					decorationBorderStyle="dashed"
					style="transparent"
					classes={index === section.featurePairs.length - 1 ? 'mb-0' : 'mb-8'}
				>
					{/* Loop through each feature in the pair */}
					{pair.map((item: any, index: number) => (
						<Col span="6" style="transparent">
							<FeatureBasicCard
								title={item.title}
								decorationType={`top bottom right ${index === pair.length - 1 ? 'left' : ''}`}
							>
								{item.description}
							</FeatureBasicCard>
						</Col>
					))}
				</Row>
			))}
		</SectionSticky>
	))
}
