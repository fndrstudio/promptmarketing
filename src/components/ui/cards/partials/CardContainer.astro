---
// Card Container
// ---------------
// Description: Wrapper component for Card. Handles links, background style, and decorations.
// Properties:
// - DecorationType: the decoration type of the card corners
// - DecorationStyle: the decoration style of the card corners
// - Link: makes the entire card clickable
// - Style: normal or transparent (background style)
// - Classes: extra classes for the container

// Components
// - UI
import DecorationBorder from '../../DecorationBorder.astro'

// Content
// - Props
type Props = {
	link?: string
	classes?: string
	style?: 'normal' | 'transparent'
	decorationType?: string
	decorationStyle?: 'dashed' | 'solid'
	// Alias to support callers passing `decoration` instead of `decorationType`
	decoration?: string
}
const {
	link,
	classes = '',
	style = 'normal',
	decorationType,
	decorationStyle = 'solid',
	decoration
} = Astro.props

// Prefer explicit `decorationType`, fallback to legacy `decoration`, default to 'all'
const resolvedDecorationType: string = decorationType ?? decoration ?? 'all'
---

{
	link ? (
		<a
			href={link}
			class:list={['card group', { [`${classes}`]: classes }, { [`card--${style}`]: style }]}
		>
			<slot />
			<DecorationBorder type={resolvedDecorationType} style={decorationStyle} />
		</a>
	) : (
		<div class:list={['card group', { [`${classes}`]: classes }, { [`card--${style}`]: style }]}>
			<slot />
			<DecorationBorder type={resolvedDecorationType} style={decorationStyle} />
		</div>
	)
}

<style>
	@reference '../../../../styles/global.css';
	.card {
		@apply relative w-full min-w-0 overflow-hidden bg-white dark:bg-neutral-950;
	}
	.card--transparent {
		@apply bg-transparent;
	}
</style>
