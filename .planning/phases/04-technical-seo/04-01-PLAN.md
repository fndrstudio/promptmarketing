---
phase: 04-technical-seo
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - astro.config.mjs
  - src/components/blocks/head/partials/Seo.astro
  - public/llms.txt
autonomous: true

must_haves:
  truths:
    - "Site config uses https://promptmarketing.com as production domain"
    - "Only one canonical tag appears in HTML head"
    - "llms.txt accessible at /llms.txt in dev server"
  artifacts:
    - path: "astro.config.mjs"
      provides: "Production site URL configuration"
      contains: "https://promptmarketing.com"
    - path: "src/components/blocks/head/partials/Seo.astro"
      provides: "SEO meta tags without duplicate canonical"
      contains: "canonical"
    - path: "public/llms.txt"
      provides: "AI agent discoverability file"
      min_lines: 30
  key_links:
    - from: "astro.config.mjs"
      to: "Astro.url"
      via: "site config"
      pattern: 'site.*promptmarketing\\.com'
---

<objective>
Fix production domain configuration and create llms.txt for AI agent discoverability.

Purpose: SEO-01 (llms.txt) and SEO-03 (canonical URLs) - establish correct production domain and enable AI agents to discover and understand PromptMarketing services.

Output:
- Updated astro.config.mjs with promptmarketing.com domain
- Fixed Seo.astro with single canonical tag
- public/llms.txt following llmstxt.org specification
</objective>

<execution_context>
@/Users/thuijsmans/.claude/get-shit-done/workflows/execute-plan.md
@/Users/thuijsmans/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-technical-seo/04-CONTEXT.md
@.planning/phases/04-technical-seo/04-RESEARCH.md

@astro.config.mjs
@src/components/blocks/head/partials/Seo.astro
@src/config/config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix production domain in astro.config.mjs</name>
  <files>astro.config.mjs</files>
  <action>
Update the `site` property in astro.config.mjs from `https://promptmarketing.ai/` to `https://promptmarketing.com` (per user decision - this is the production domain).

Change line 13:
FROM: `site: "https://promptmarketing.ai/",`
TO: `site: "https://promptmarketing.com",`

This affects:
- Canonical URLs generated via Astro.url
- Sitemap generation
- Any absolute URL construction
  </action>
  <verify>
Run `grep -n "promptmarketing.com" astro.config.mjs` - should return line with site config.
Run `grep -n "promptmarketing.ai" astro.config.mjs` - should return nothing.
  </verify>
  <done>Site config points to https://promptmarketing.com; no .ai domain references remain</done>
</task>

<task type="auto">
  <name>Task 2: Fix duplicate canonical tag in Seo.astro</name>
  <files>src/components/blocks/head/partials/Seo.astro</files>
  <action>
The current Seo.astro has TWO canonical tags (lines 37-38):
1. Line 37: `<link rel="canonical" href={Astro.url} />` (unconditional)
2. Line 38: `{canonical && <link rel="canonical" href={Astro.url} item-prop="url" />}` (conditional)

This is a bug - search engines get confused by duplicate canonicals.

FIX: Remove line 37 (the unconditional one). Keep line 38 which respects the `canonical` prop from config (currently `canonical: true` in config.ts).

The result should be a single conditional canonical:
```astro
{canonical && <link rel="canonical" href={Astro.url} />}
```

Note: Remove the `item-prop="url"` attribute as it's non-standard for canonical links.
  </action>
  <verify>
Run: `grep -c "rel=\"canonical\"" src/components/blocks/head/partials/Seo.astro`
Should return: 1 (only one canonical tag)
  </verify>
  <done>Seo.astro contains exactly one canonical link tag that respects the canonical prop</done>
</task>

<task type="auto">
  <name>Task 3: Create llms.txt for AI agent discoverability</name>
  <files>public/llms.txt</files>
  <action>
Create public/llms.txt following the llmstxt.org specification. This file helps AI agents (ChatGPT, Claude, Perplexity, etc.) understand and navigate the site.

Content should reflect PromptMarketing's "Scientific Forest" voice: precise, technical, no guru language.

Structure per spec:
1. H1 heading: "PromptMarketing"
2. Blockquote: Brief summary (1-2 sentences)
3. Body text: Expanded description
4. H2 sections with link lists

```markdown
# PromptMarketing

> Relevance Engineering consultancy that operationalizes Machine Trust. We architect the knowledge layers that ensure brands are understood, trusted, and selected by AI systems.

PromptMarketing applies systematic measurement and technical optimization to improve how AI systems perceive and represent brands. Our work spans four practice areas: Prompt Intelligence (measurement), Relevance Engineering (optimization), Agentic Commerce (transactions), and AI Advertising (paid channels).

Based in Amsterdam, we work with organizations navigating the shift from search-first to AI-first discovery.

## Services

- [Prompt Intelligence](/how-we-work): Measurement and research including Competitive Visibility Analysis, AI Selection Rate tracking, and LLM Brand Sentiment studies
- [Relevance Engineering](/how-we-work): Technical optimization including Structured Data implementation, Entity Optimization, and Content Authority Signals
- [Agentic Commerce](/how-we-work): AI-native transaction preparation including Agent Protocol Setup and Commerce Graph optimization
- [AI Advertising](/how-we-work): Generative Engine Advertising strategy and campaign management

## Company

- [About Us](/about): Our approach, Amsterdam headquarters, and team
- [How We Work](/how-we-work): Four-phase systematic process (Audit, Design, Build, Measure)
- [Contact](/contact): Request a GEO Readiness Audit

## Content

- [Blog](/blog): Technical insights on AI marketing and machine trust
- [Portfolio](/portfolio): Case studies demonstrating measurable results

## Optional

- [Privacy Policy](/privacy): Data handling practices
- [Terms of Service](/terms): Service agreement
```
  </action>
  <verify>
Run: `curl -s http://localhost:4321/llms.txt | head -5`
Should show the H1 heading and blockquote.

Also verify file exists: `ls -la public/llms.txt`
  </verify>
  <done>llms.txt exists at /llms.txt, follows llmstxt.org spec, reflects Scientific Forest voice</done>
</task>

</tasks>

<verification>
After all tasks:
1. `npm run dev` starts without errors
2. `curl http://localhost:4321/llms.txt` returns the llms.txt content
3. View page source of any page - only ONE canonical tag appears
4. Build succeeds: `npm run build` completes without errors
</verification>

<success_criteria>
- astro.config.mjs site property is "https://promptmarketing.com"
- Seo.astro has exactly one canonical link tag
- public/llms.txt exists with valid Markdown content following llmstxt.org spec
- Dev server serves llms.txt at root path
- Build completes successfully
</success_criteria>

<output>
After completion, create `.planning/phases/04-technical-seo/04-01-SUMMARY.md`
</output>
